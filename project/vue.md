# webpack

åŸºæœ¬ä½œç”¨: å°†è®¸å¤šé›¶ç¢çš„å°æ–‡ä»¶æ•´åˆåˆ°ä¸€èµ·, ç¼©å°æ–‡ä»¶çš„ä½“ç§¯

# webpacé…ç½®

## webpackçš„ä½¿ç”¨æ–¹æ³•

```javascript
// 1. åˆå§‹åŒ–åŒ…ç¯å¢ƒ
npm init
// 2. å®‰è£…ä¾èµ–åŒ…
// -Dï¼šè¡¨ç¤ºå°†webpackã€webpack-cliè¿™ä¸¤ä¸ªåŒ…è®°å½•åœ¨å¼€å‘ç¯å¢ƒ
npm install webpack webpack-cli -D 
// 3. è¿è¡Œwebpack
webpack
// æ³¨: index.jsæ˜¯webpackæ‰“åŒ…çš„å…¥å£æ–‡ä»¶
```

## ä¿®æ”¹webpacké»˜è®¤çš„å…¥å£æ–‡ä»¶ä¸å‡ºå£æ–‡ä»¶ä½ç½®

```javascript
const path = require('path')

module.exports = {
  entry: './src/index.js', // å…¥å£æ–‡ä»¶ä½ç½®
  output: {
    path: path.resolve(__dirname, 'dist'), // å‡ºå£æ–‡ä»¶ä½ç½®
    filename: 'my-first-webpack.bundle.js', // å‡ºå£æ–‡ä»¶åç§°
  },
};

// æ³¨æ„: webpackæ¯æ¬¡æ‰“åŒ…åªä¼šè¦†ç›–åŒä½ç½®åŒåçš„æ–‡ä»¶
//      æ‰€ä»¥æ¯æ¬¡æ‰“åŒ…å‰å°½é‡å°†ä¸Šä¸€æ¬¡æ‰“åŒ…çš„æ–‡ä»¶å¤¹åˆ é™¤
```

## webpackæ‰“åŒ…æµç¨‹

npm run build(è‡ªå®šä¹‰å‘½ä»¤) ===> æ‰§è¡Œwebpackå‘½ä»¤ ===> æ£€æŸ¥æ˜¯å¦æœ‰é…ç½®æ–‡ä»¶

æœ‰: æ ¹æ®é…ç½®æ–‡ä»¶å¾—åˆ°é…ç½®å‚æ•° ===> 

æ— : æ‰§è¡Œé»˜è®¤é…ç½®æ–‡ä»¶ ===>

åŒ: æ‰¾åˆ°å…¥å£ ===> å…ˆæ„å»ºä¾èµ–å…³ç³»å›¾ç¼–è¯‘å„ä¸ªæ¨¡å—æ–‡ä»¶ ===> è¾“å‡º ===> æŒ‡å®šæ–‡ä»¶

## webpackæ‰“åŒ…åç”Ÿæˆhtmlæ–‡ä»¶å¹¶è‡ªåŠ¨å¼•å…¥æ‰“åŒ…åçš„js

```javascript
// 1. ä¸‹è½½ html-webpack-pluginæ’ä»¶
const HtmlWebpackPlugin = require('html-webpack-plugin')

module.exports = {
    plugins: [
    new HtmlWebpackPlugin({
      template: './public/index.html'  // å‘Šè¯‰webpackä½¿ç”¨æ’ä»¶æ—¶, ä»¥æˆ‘ä»¬è‡ªå·±çš„htmlæ–‡ä»¶ä½œä¸ºæ¨¡æ¿å»ç”Ÿæˆdist/htmlæ–‡ä»¶
    })
  ]
}
```

## åŠ è½½å™¨ - å¤„ç†cssæ–‡ä»¶

```javascript
//  ä¸‹è½½ style-loader css-loader ä¾èµ–åŒ…
module.exports = {
    module: { // åŠ è½½å™¨é…ç½®
    rules: [ // è§„åˆ™
      { // ä¸€ä¸ªå…·ä½“çš„è§„åˆ™å¯¹è±¡
        test: /\.css$/i, // åŒ¹é….cssç»“å°¾çš„æ–‡ä»¶
        use: ["style-loader", "css-loader"], // è®©webpackä½¿ç”¨è¿™2ä¸ªloaderå¤„ç†cssæ–‡ä»¶
        // æ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦çš„, æ‰€ä»¥ä¸èƒ½é¢ å€’é¡ºåº
        // css-loader: webpackè§£æcssæ–‡ä»¶-æŠŠcssä»£ç ä¸€èµ·æ‰“åŒ…è¿›jsä¸­
        // style-loader: cssä»£ç æ’å…¥åˆ°DOMä¸Š (styleæ ‡ç­¾)
      },
    ],
  },
}
```

## åŠ è½½å™¨ -  å¤„ç†lessæ–‡ä»¶

```javascript
// ä¸‹è½½ less less-loader ä¾èµ–åŒ…

module.exports = {
    module: { // åŠ è½½å™¨é…ç½®
    rules: [ // è§„åˆ™
      {
        test: /\.less/,
        use: ['style-loader', 'css-loader', 'less-loader']
      }
    ],
  },
}
```

## åŠ è½½å™¨ - å¤„ç†å›¾ç‰‡æ–‡ä»¶

### webpack4 åŠä¹‹å‰ç‰ˆæœ¬

```javascript
// ä¸‹è½½ url-loader file-loaderä¾èµ–
// url-loaderæ–‡æ¡£ï¼šå®ƒæŠŠæ–‡ä»¶è½¬æ¢æˆbase64 uri
// file-loaderæ–‡æ¡£ï¼šå°†æ–‡ä»¶ä¸Šçš„import/require()è§£æä¸ºä¸€ä¸ªurlï¼Œå¹¶å°†è¯¥æ–‡ä»¶å‘é€åˆ°è¾“å‡ºç›®å½•ã€‚
```

### webpack4 ä¹‹åç‰ˆæœ¬

```javascript
// ä¸å†éœ€è¦ä¸‹è½½ä¾èµ–

module.exports = {
    module: { // åŠ è½½å™¨é…ç½®
    rules: [ // è§„åˆ™
      { // å›¾ç‰‡æ–‡ä»¶çš„é…ç½®(ä»…é€‚ç”¨äºwebpack5ç‰ˆæœ¬)
        test: /\.(gif|png|jpg|jpeg)/,
        type: 'asset' // åŒ¹é…ä¸Šé¢çš„æ–‡ä»¶å, webpackä¼šæŠŠä»–ä»¬å½“åšé™æ€èµ„æºå¤„ç†æ‰“åŒ…
          // å¦‚æœä½ è®¾ç½®çš„æ˜¯assetæ¨¡å¼
          // ä»¥8KBå¤§å°åŒºåˆ†å›¾ç‰‡æ–‡ä»¶
          // å°äº8KBçš„, æŠŠå›¾ç‰‡æ–‡ä»¶è½¬base64, æ‰“åŒ…è¿›jsä¸­
          // å¤§äº8KBçš„, ç›´æ¥æŠŠå›¾ç‰‡æ–‡ä»¶è¾“å‡ºåˆ°distä¸‹
      }
    ],
  },
}
```

## webpackåŠ è½½å›¾ç‰‡æ–‡ä»¶çš„ä¼˜ç¼ºç‚¹ğŸ”¥

>ä¼˜: æµè§ˆå™¨ä¸ç”¨å‘è¯·æ±‚äº†ï¼Œå¯ä»¥ç›´æ¥è¯»å–
>
>ç¼º: å¦‚æœå›¾ç‰‡å¤ªå¤§ï¼Œå†è½¬base64å°±ä¼šè®©å›¾ç‰‡çš„ä½“ç§¯å¢å¤§ 30% å·¦å³

## åŠ è½½å™¨ - å¤„ç†å­—ä½“å›¾æ ‡

```javascript
// webpack5

module.exports = {
    module: { // åŠ è½½å™¨é…ç½®
    rules: [ // è§„åˆ™
            { // webpack5é»˜è®¤å†…éƒ¨ä¸è®¤è¯†è¿™äº›æ–‡ä»¶, æ‰€ä»¥å½“åšé™æ€èµ„æºç›´æ¥è¾“å‡ºå³å¯
            test: /\.(eot|svg|ttf|woff|woff2)$/,
            type: 'asset/resource', // æ‰€æœ‰çš„å­—ä½“å›¾æ ‡æ–‡ä»¶, éƒ½è¾“å‡ºåˆ°distä¸‹
            generator: { // ç”Ÿæˆæ–‡ä»¶åå­— - å®šä¹‰è§„åˆ™
              filename: 'fonts/[name].[hash:6][ext]' // [ext]ä¼šæ›¿æ¢æˆ.eot/.woff
            }
          }
        ]
    }
}
```

## åŠ è½½å™¨ - å¤„ç†é«˜ç‰ˆæœ¬jsè¯­æ³•ğŸ”¥	

>**é¢è¯•é—®é¢˜ï¼š ä½ å¯¹å‰ç«¯æµè§ˆå™¨å…¼å®¹æ€§ä¸Šæœ‰è¿‡é‚£äº›å¤„ç†æ–¹æ¡ˆï¼Ÿ**
>
>é€šè¿‡webpackçš„jsé™çº§è®¾ç½®ï¼Œæ¥è®©é«˜ç‰ˆæœ¬çš„jsè¯­æ³•é™çº§ä¸ºä½ç‰ˆæœ¬ï¼Œé€‚ç”¨äºieä½ç‰ˆæœ¬æµè§ˆå™¨ï¼›ieå·²ç»åœæ­¢ç»´æŠ¤äº†ï¼Œæ‰€ä»¥æ…¢æ…¢çš„æˆ‘ä»¬ä¸ä¼šå»å…³æ³¨ieçš„é€‚é…é—®é¢˜

```javascript
// ä¸‹è½½ babel-loader @babel/core @babel/preset-env ä¾èµ–

module.exports = {
    module: { // åŠ è½½å™¨é…ç½®
    rules: [ // è§„åˆ™
     {
        test: /\.m?js$/,
        exclude: /(node_modules|bower_components)/, // ä¸å»åŒ¹é…è¿™äº›æ–‡ä»¶å¤¹ä¸‹çš„æ–‡ä»¶ï¼ˆé˜²æ­¢å½±å“å…¶ä»–ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼‰
        use: {
          loader: 'babel-loader', // ä½¿ç”¨è¿™ä¸ªloaderå¤„ç†jsæ–‡ä»¶
          options: { // åŠ è½½å™¨é€‰é¡¹
            presets: ['@babel/preset-env'] // é¢„è®¾: @babel/preset-env é™çº§è§„åˆ™-æŒ‰ç…§è¿™é‡Œçš„è§„åˆ™é™çº§æˆ‘ä»¬															   çš„jsè¯­æ³•
          }
        }
      }
    ],
  },
}
```

# webpacå¼€å‘æœåŠ¡å™¨(çƒ­æ›´æ–°)

```javascript
//	ä¸‹è½½ webpack-dev-server ä¾èµ–

"scripts": {
    "build": "webpack --mode production", // ç”Ÿäº§ç¯å¢ƒ
    "serve": "webpack serve --mode development" // å¼€å‘ç¯å¢ƒ
  },
```

## webpack-dev-serveré…ç½®(è‡ªå®šä¹‰ç«¯å£å·)

```javascript
module.exports = {
    devServer: {
        port: 3000 // ç«¯å£å·
    }
}
```

# VUEçš„ç‰¹ç‚¹

>vueæœ€å¤§çš„ç‰¹ç‚¹æ˜¯æ¸è¿›å¼æ¡†æ¶
>
>æ¸è¿›å¼: é€æ¸ä½¿ç”¨, é›†æˆæ›´å¤šçš„åŠŸèƒ½

# VUEå®‰è£…

```javascript
// 1. å…¨å±€å®‰è£…
npm i @vue/cli -g
// 2. æŸ¥çœ‹ç‰ˆæœ¬å·
vue -V
// 3. åˆ›å»ºé¡¹ç›®
vue create é¡¹ç›®æ–‡ä»¶å¤¹åç§° // æ³¨:é¡¹ç›®æ–‡ä»¶å¤¹åç§°ä¸€èˆ¬ç”± å°å†™å­—æ¯+çŸ­æ¨ªçº¿ ç»„æˆ
// 4. é€‰æ‹©æ¨¡æ¿ vue2
// 5. è¿è¡Œ
npm run serve
```

# Vueé…ç½®

## ç«¯å£å·

```javascript
const { defineConfig } = require('@vue/cli-service')
module.exports = defineConfig({
  devServer: { // è‡ªå®šä¹‰æœåŠ¡é…ç½®
    open: true,  // å½“å¼€å¯æœåŠ¡å™¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨
    port: 3000 // è‡ªå®šä¹‰ç«¯å£å·
    host: 'localhost' // è§£å†³vueåŸŸåä¸º0.0.0.0
  }
})
```

## è§„èŒƒä»£ç æ£€æµ‹

>ç¯å¢ƒ: åœ¨å®šä¹‰äº†å˜é‡, æ²¡æœ‰ä½¿ç”¨çš„æƒ…å†µä¸‹

```javascript
// æ–¹æ³•ä¸€ (å…¨å±€å±è”½eslintæ£€æµ‹)
ç»™é…ç½®æ–‡ä»¶æ·»åŠ  lintOnSave:false å±æ€§
// æ–¹æ³•äºŒ (å±€éƒ¨å±è”½eslintæ£€æµ‹ - å•è¡Œæ³¨é‡Š)

// eslint-disable-next-line
let a = 'a'

or

let a = 'a'	// eslint-disable-next-line

// æ–¹æ³•ä¸‰ (å±€éƒ¨å±è”½eslintæ£€æµ‹ - å¤šè¡Œæ³¨é‡Š)
/* eslint-disable */
let a = 123
/* eslint-enable  */
```

## styleé…åˆscopedå±æ€§, ä¿è¯æ ·å¼åªé’ˆå¯¹å½“å‰templateå†…æ ‡ç­¾ç”Ÿæ•ˆ

# æ’å€¼è¡¨è¾¾å¼

>å¯ä»¥åˆ©ç”¨åŒå¤§æ‹¬å·ç›´æ¥åœ¨domæ ‡ç­¾ä¸­æ’å…¥å†…å®¹ï¼Œä¸å¿…è¿›è¡Œwebapiçš„ä¸€ç³»åˆ—æ“ä½œ

**è¯­æ³•:** {{ è¡¨è¾¾å¼ }}

```vue
<template>
  <div>
    <div>{{ msg }}</div>
    <div>{{ 1 == 1 }}</div>
    <div>{{ 1 + 1 }}</div>
    <div>
      æˆ‘çš„åå­—æ˜¯{{ obj.name }},æˆ‘ä»Šå¹´{{ obj.age }}å²,
      {{ obj.age >= 18 ? "æˆ‘æˆå¹´äº†" : "æˆ‘æ²¡æœ‰æˆå¹´" }}.
    </div>
  </div>
</template>

<script>
export default {
  name: "expressionDemo",
  data() {
    return {
      msg: "æ’å€¼è¡¨è¾¾å¼",
      obj: {
        name: "æ³•å¤–ç‹‚å¾’",
        age: 18,
      },
    };
  },
};
</script>

<style>
</style>
```

# MVVMæ¨¡å¼ğŸ”¥

vueä½¿ç”¨çš„mvvmè®¾è®¡æ¨¡å¼ã€‚**MVVM**æ˜¯`Model-View-ViewModel`ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æŠŠ`MVC`ä¸­çš„`Controller`æ¼”å˜æˆ`ViewModel`ã€‚`Model`å±‚ä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œ`View`ä»£è¡¨UIç»„ä»¶ï¼Œ`ViewModel`æ˜¯`View`å’Œ`Model`å±‚çš„æ¡¥æ¢ï¼Œæ•°æ®ä¼šç»‘å®šåˆ°`viewModel`å±‚å¹¶è‡ªåŠ¨å°†æ•°æ®æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œè§†å›¾å˜åŒ–çš„æ—¶å€™ä¼šé€šçŸ¥`viewModel`å±‚æ›´æ–°æ•°æ®ã€‚

# v-bind åŠ¨æ€å±æ€§

>ç»™æ ‡ç­¾å±æ€§è®¾ç½®vueå˜é‡çš„å€¼

**è¯­æ³•:**

1.  v-bind:å±æ€§å="vueå˜é‡"
2.  :å±æ€§å="vueå˜é‡"

**æ³¨æ„:** å½“åŠ¨æ€å±æ€§æ˜¯å›¾ç‰‡æˆ–å…¶ä»–æ–‡ä»¶è·¯å¾„æ—¶, é‚£ä¹ˆä¸å¯ä»¥ç›´æ¥å°†è·¯å¾„çš„å­—ç¬¦ä¸²ä½œä¸ºåŠ¨æ€å±æ€§å˜é‡çš„å€¼, éœ€è¦ä½¿ç”¨importæˆ–è€…æ˜¯requireæ¥è¿›è¡Œå¼•å…¥

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <a v-bind:href="url">ç™¾åº¦</a>
    <a :href="url">ç™¾åº¦</a>
    <!-- 
      å…³äºåŠ¨æ€å±æ€§çš„ç‰¹ä¾‹ï¼š åœ¨ä½¿ç”¨åŠ¨æ€å±æ€§æ¸²æŸ“å›¾ç‰‡æ—¶ï¼Œä¸å¯ä»¥ç›´æ¥å°†å˜é‡çš„å€¼è®¾ç½®ä¸ºè·¯å¾„
      åŸå› ï¼š v-bindä¼šæŠŠè¿™ä¸ªè·¯å¾„è®¤ä¸ºæ˜¯å­—ç¬¦ä¸²
      è§£å†³æ–¹æ¡ˆï¼š 
        1. é€šè¿‡ import çš„æ–¹å¼å¼•å…¥å›¾ç‰‡å¹¶ä¸”èµ‹å€¼ç»™dataä¸­çš„å˜é‡
        2. é€šè¿‡ require çš„æ–¹å¼å¼•å…¥å›¾ç‰‡å¹¶èµ‹å€¼ç»™dataä¸­çš„å˜é‡

      ä»¥ä¸Šä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œä½ è§‰å¾—å“ªä¸€ä¸ªæ›´å¥½å‘¢ï¼Ÿï¼Ÿ
      ç­”ï¼š require çš„å¼•å…¥æ–¹å¼æ›´ä¸ºå‹å¥½ã€‚ å½“ä¸€ä¸ªvueæ–‡ä»¶è¢«ä½¿ç”¨æ—¶ï¼Œé‚£ä¹ˆæ—¢ç„¶æ˜¯jsä»£ç ï¼Œé‚£ä¹ˆéµå¾ªä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œï¼Œimportä¸­å¼•å…¥çš„å›¾ç‰‡å°±ä¼šåœ¨é¡µé¢æ¸²æŸ“åˆæœŸè¢«åŠ è½½ï¼Œè€Œrequireå¼•å…¥çš„å›¾ç‰‡ï¼Œåªæœ‰åœ¨ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šè¢«åŠ è½½ï¼Œåˆæ¬¡å¼€å¯é¡µé¢ä¼šæ˜¾å¾—æ›´åŠ çš„é«˜æ•ˆ
    -->
    <hr />
    <img src="../assets/123.png" alt="">
    <img :src="url2" alt="">
    <hr>
    <img :src="url3" alt="">
    <hr>
    <img :src="url4" alt="">
  </div>
</template>

<script>
import image from '../assets/123.png'
export default {
  name: "bindDemo",
  data() {
    return {
      url:'http://baidu.com',
      url2:'../assets/123.png',
      url3:image,
      url4:require('../assets/123.png')
    };
  },
};
</script>

<style>
</style>
```

# vueé¡¹ç›®ä¼˜åŒ–ğŸ”¥

å¯ä»¥ç”¨requireçš„æ–¹å¼å¼•å…¥å›¾ç‰‡ï¼Œå½“ä½¿ç”¨åˆ°å®ƒçš„æ—¶å€™æ‰ä¼šæŒ‰éœ€åŠ è½½ï¼Œè€Œä¸ä¼šåƒimportå¼•å…¥é‚£æ ·åœ¨é¡µé¢åˆ›å»ºæ—¶å°±ä¼šåŠ è½½ï¼ŒåŠ å¿«é¡µé¢åˆæ¬¡åŠ è½½æ•ˆç‡

# v-on äº‹ä»¶ç»‘å®š

>ç»™æ ‡ç­¾ç»‘å®šäº‹ä»¶

**è¯­æ³•:**

1.  v-on:äº‹ä»¶å=å›è°ƒå‡½æ•°
2. @äº‹ä»¶å=å›è°ƒå‡½æ•°

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <div>å½“å‰æ•°é‡:{{count}}</div>
    <button v-on:click='count+=1'>ç‚¹å‡»+1</button>
    <button v-on:click='addFn'>ç‚¹å‡»+2</button>
    <button v-on:click='addCountFn(5)'>ç‚¹å‡»+5</button>
    <button @click="reduceFn()">ç‚¹å‡»-1</button>
  </div>
</template>

<script>
export default {
  name:'eventBindDemo',
  data(){
    return{
      count:0
    }
  },
  methods:{
    // è¿™é‡Œçš„thisä»£è¡¨çš„æ˜¯ export default è¿™ä¸ªå¯¹è±¡
    addFn(){
      this.count+=2
    },
    addCountFn(num){
      this.count+=num
    },
    reduceFn(){
      this.count--
    }
  }
}
</script>

<style>

</style>
```

# v-on è·å–äº‹ä»¶å¯¹è±¡

**æ–¹æ³•:**

1. æ— ä¼ å‚, é€šè¿‡å½¢å‚ç›´æ¥æ¥æ”¶
2. ä¼ å‚, é€šè¿‡`$event`æŒ‡ä»£äº‹ä»¶å¯¹è±¡ä¼ ç»™äº‹ä»¶å¤„ç†å‡½æ•°

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <!-- äº‹ä»¶å¯¹è±¡ -->
    <!--  
    v-onè·å–äº‹ä»¶å¯¹è±¡ - event 1. æ— å‚æ•°è·å–äº‹ä»¶å¯¹è±¡ -
    æˆ‘ä»¬çš„æ—¶é—´å¯¹è±¡eventé»˜è®¤åœ¨ç¬¬ä¸€ä¸ªå½¢å¼å‚æ•°ä¸Š 2.
    æœ‰å‚æ•°(ç‰¹æŒ‡å¸¦å°æ‹¬å·çš„æ–¹æ³•)ï¼Œè¿™ä¸ªå°æ‹¬å·ä¼šè¦†ç›–eventé»˜è®¤å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åŒ$eventçš„å®é™…å‚æ•°æ¥ä»£æ›¿è¿™ä¸ªäº‹ä»¶å¯¹è±¡
    æ³¨æ„äº‹é¡¹ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å°†äº‹ä»¶å¯¹è±¡event æ”¾åˆ°æ•´ä¸ªå½¢å¼å‚æ•°çš„æœ€åä¸€ä½
     -->
    <button @click="eventFn">äº‹ä»¶ä¸€</button>
    <button @click="eventFn2(5, $event)">äº‹ä»¶äºŒ</button>
    <a @click="go" href="http://www.baidu.com">æˆ‘æƒ³å»çœ‹è¯—å’Œè¿œæ–¹</a>
  </div>
</template>

<script>
export default {
  name: "eventBindDemo",
  methods: {
    eventFn(e) {
      console.log(e);
    },
    eventFn2(num, e) {
      console.log(num, e);
    },
    go(e){
      e.preventDefault()
    }
  },
};
</script>

<style>
</style>
```

# v-onä¿®é¥°ç¬¦

**è¯­æ³•:** @äº‹ä»¶å.ä¿®é¥°ç¬¦=å›è°ƒå‡½æ•°

- .stop é˜»æ­¢äº‹ä»¶å†’æ³¡
- .prevent é˜»æ­¢é»˜è®¤è¡Œä¸º
- .once ç¨‹åºè¿è¡ŒæœŸé—´, åªè§¦å‘ä¸€æ¬¡äº‹ä»¶å¤„ç†å‡½æ•°

**æ¡ˆä¾‹:**

```vue
<template>
  <div @click='fatherFn'>
    <p @click.stop='stopFn'>ç‚¹å‡»åå¸Œæœ›é˜»æ­¢å†’æ³¡</p>
    <a href="http://www.baidu.com" @click.prevent.stop>è·³è½¬ç™¾åº¦</a>
    <p @click.once="clickCount">è§‚å¯Ÿè¿™ä¸ªç‚¹å‡»äº‹ä»¶åˆ°åº•æ‰§è¡Œå‡ æ¬¡</p>
  </div>
</template>

<script>
export default {
  name:'modifierDemo',
  data(){
    return{

    }
  },
  methods:{
    // çˆ¶æ ‡ç­¾
    fatherFn(){
      console.log('å†’æ³¡äº‹ä»¶è§¦å‘äº†')
    },
    // é˜»æ­¢å†’æ³¡
    stopFn(){
      console.log('å­å…ƒç´ äº‹ä»¶è§¦å‘')
    },
    // æ‰§è¡Œæ¬¡æ•°
    clickCount(){
      console.log('onceè§¦å‘')
    }
  }
}
</script>

<style>

</style>
```

**v-onæŒ‰é”®ä¿®é¥°ç¬¦**

**è¯­æ³•:** @äº‹ä»¶ç±»å‹.æŒ‰é”®=å›è°ƒå‡½æ•°       // **æŒ‰é”®å¿…é¡»ä¸ºå…¨å°å†™**

**æ¡ˆä¾‹:**

```vue
<template>
  <input type="text" name="" id="" @keyup.enter="keyupFn">
</template>

<script>
export default {
  name:'keyDecoration',
  methods:{
    keyupFn(e){
      console.log('äº‹ä»¶å¯¹è±¡',e)
    }
  }
}
</script>

<style>

</style>
```

# v-modelåŒå‘ç»‘å®š

>æŠŠvalueå±æ€§å’Œvueæ•°æ®å˜é‡, åŒå‘ç»‘å®šåˆ°ä¸€èµ·, å½“å…¶ä¸­ä¸€ä¸ªå€¼å‘ç”Ÿæ”¹å˜, å¦ä¸€ä¸ªçš„å€¼ä¹Ÿè·Ÿç€æ”¹å˜.

**è¯­æ³•:** v-mode='vueæ•°æ®å˜é‡'

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <!-- æ–‡æœ¬æ¡†     -->
    <div>
      <label for="uname">ç”¨æˆ·å</label>
      <input type="text" name="uname" v-model="uname" />
    </div>
    <!-- ä¸‹æ‹‰åˆ—è¡¨æ¡† -->
    <div>
      <label for="">åœ°åŒº:</label>
      <select v-model="area" id="">
        <option value="" selected>--è¯·é€‰æ‹©åœ°åŒº--</option>
        <option value="æˆéƒ½">æˆéƒ½</option>
        <option value="æˆéƒ½">åŒ—äº¬</option>
        <option value="æˆéƒ½">ä¸Šæµ·</option>
      </select>
    </div>
    <!-- å•é€‰æ¡† -->
    <div>
      <label for="">æ€§åˆ«:</label>
      <input type="radio" value="ç”·" v-model="sex">ç”·
      <input type="radio" value="å¥³" v-model="sex">å¥³
    </div>
    <!-- å¤é€‰æ¡† -->
    <div>
      <label for="">çˆ±å¥½</label>
      <input type="checkbox" value="åƒé¥­" v-model="hobby">åƒé¥­
      <input type="checkbox" value="ç¡è§‰" v-model="hobby">ç¡è§‰
      <input type="checkbox" value="æ‰“è±†è±†" v-model="hobby">æ‰“è±†è±†
    </div>
    <!-- æ–‡æœ¬åŸŸ -->
    <div>
      <textarea v-model="text" id="" cols="30" rows="10"></textarea>
    </div>
  </div>
</template>

<script>
export default {
  name: "dataBind",
  data() {
    return {
      uname: "",
      area: "",
      sex:'',
      hobby:[],
      text:""
    };
  },
};
</script>

<style>
</style>
```

# vueåŒå‘ç»‘å®šçš„åŸç†ğŸ”¥

>å½“ä¸€ä¸ªVueå®ä¾‹åˆ›å»ºæ—¶ï¼ŒVueä¼šéå†dataé€‰é¡¹çš„å±æ€§ï¼Œç”¨`Object.defineProperty`å°†å®ƒä»¬è½¬åŒ–ä¸º`getter/setter`å¹¶ä¸”åœ¨å†…éƒ¨è¿½è¸ªç›¸å…³ä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®æ‹’ç»å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜åŒ–ã€‚æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½æœ‰ç›¸åº”çš„watcherç¨‹åºå®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠå±æ€§è®°å½•ä¸ºä¾èµ–ï¼Œä¹‹åå½“ä¾èµ–é¡¹çš„setterè¢«è°ƒç”¨æ—¶ï¼Œä¼šé€šçŸ¥watcheré‡æ–°è®¡ç®—ï¼Œä»è€Œè‡´ä½¿å®ƒå…³è”çš„ç»„ä»¶å¾—ä»¥æ›´æ–°ã€‚

# v-modelä¿®é¥°ç¬¦

**è¯­æ³•:** v-model.ä¿®é¥°ç¬¦="vueæ•°æ®å˜é‡"

-  number  ä»¥parseFloatè½¬æˆæ•°å­—ç±»å‹ï¼ˆä¼šè‡ªåŠ¨æ¸…é™¤éæ•°å­—åŠä»¥åéƒ¨åˆ†)  // æ³¨: å¦‚æœä»¥éæ•°å­—å¼€å¤´åˆ™ä¸ç”Ÿæ•ˆ
- trim å»é™¤é¦–å°¾ç©ºç™½å­—ç¬¦
- lazy åœ¨changeæ—¶è§¦å‘è€Œéinputæ—¶ï¼ˆä¸€åˆ‡å¯ä»¥è§¦å‘changeäº‹ä»¶çš„æƒ…å†µï¼Œå¦‚å¤±ç„¦ï¼‰

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <label for="">æ‰‹æœºå·:</label>
    <input type="text" v-model.trim.number.lazy="phone">
  </div>
</template>

<script>
export default {
  name:'bindDecription',
  data(){
    return{
      phone:''
    }
  }
}
</script>

<style>

</style>
```

# v-textä¸v-html

>æ›´æ–°DOMå¯¹è±¡çš„innerText/innerHTML

**è¯­æ³•:** 

- v-text="vueæ•°æ®å˜é‡"
- v-html="vueæ•°æ®å˜é‡"

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <div v-text="str"></div>
    <div v-html="str"></div>
  </div>
</template>

<script>
export default {
  name:'insertDemo',
  data(){
    return{
      str:'<span style="color:skyblue">æˆ‘æ˜¯ä¸€æ®µæ–‡æœ¬</span>'
    }
  }
}
</script>

<style>

</style>
```

# v-ifä¸v-show

>åŒ: æ ‡ç­¾çš„æ˜¾ç¤ºä¸éšè—
>
>å¼‚: v-showæ˜¯ç»™domå…ƒç´ æ·»åŠ ä¸€ä¸ªdisplay:noneå±æ€§,è¯¥å…ƒç´ è¿˜åœ¨domæ ‘ä¸Š,ä¸€èˆ¬åº”ç”¨äºåˆ‡æ¢æ¯”è¾ƒé¢‘ç¹çš„åœ°æ–¹
>
>â€‹	  v-ifæ˜¯å°†è¯¥domå…ƒç´ ä»domæ ‘ä¸Šå½»åº•åˆ é™¤,                                                      

**è¯­æ³•:**

- v-show="vueå˜é‡"
- v-if="vueå˜é‡"

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <p v-show="false">æˆ‘æ˜¯v-show</p>
    <p v-if="false">æˆ‘æ˜¯v-if</p>
    <div>
      æ‚¨æ˜¯:?
      <p v-if="age < 18">æœªæˆå¹´</p>
      <p v-else-if="age >= 18 && age < 22">å¤§å­¦ç”Ÿ</p>
      <p v-else>ç¤¾ç•œ</p>
    </div>
  </div>
</template>

<script>
export default {
  name: "isShow",
  data() {
    return {
      age: 17,
    };
  },
};
</script>

<style>
</style> 
```

# v-for

>æ¸²æŸ“æ•°æ®åˆ—è¡¨

**è¯­æ³•:**

- v-for="å€¼ in ç›®æ ‡ç»“æ„"
- v-for="(å€¼,ç´¢å¼•) in ç›®æ ‡ç»“æ„"

**ç›®æ ‡ç»“æ„:**

- æ•°ç»„
- å¯¹è±¡
- æ•°å­—
- å­—ç¬¦ä¸²

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <!-- éå†æ•°ç»„ -->
    <ul>
      <li v-for="(value, index) in arr" :key="index">{{ value }}</li>
    </ul>
    <!-- éå†å¯¹è±¡ -->
    <ul>
      <li v-for="(value, key) in obj" :key="key">{{ value }}---{{ key }}</li>
    </ul>
    <!-- éå†æ•°ç»„å¯¹è±¡ -->
    <ul>
      <li v-for="value in arr2" :key="value.id">
        {{ value.id }}---{{ value.name }}
      </li>
    </ul>
    <!-- éå†æ•°å­— -->
    <ul>
      <li v-for="(value, index) in num" :key="index">
        {{ value }}---{{ index }}
      </li>
    </ul>
    <!-- éå†å­—ç¬¦ä¸² -->
    <ul>
      <li v-for="(value, index) in str" :Key="index">
        {{ value }}---{{ index }}
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  name: "v-for",
  data() {
    return {
      arr: [1, 2, 3],
      arr2: [
        { id: 1, name: "ä¸€å·" },
        {
          id: 2,
          name: "äºŒå·",
        },
        {
          id: 3,
          name: "ä¸‰å·",
        },
      ],
      obj: {
        name: "å¼ ä¸‰",
        age: 18,
        work: "æ³•å¤–ç‹‚å¾’",
      },
      num: 12,
      str: "hello world",
    };
  },
};
</script>

<style>
</style>
```

# v-forä¸v-ifç»„åˆä½¿ç”¨

å½“ v-if ä¸ v-for ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œv-for å…·æœ‰æ¯” v-if æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚è¿™æ„å‘³ç€ v-if å°†åˆ†åˆ«é‡å¤è¿è¡Œäº æ¯ä¸ª v-for å¾ªç¯ä¸­ï¼Œå³å…ˆè¿è¡Œ v-for çš„å¾ªç¯ï¼Œç„¶ååœ¨æ¯ä¸€ä¸ª v-for çš„å¾ªç¯ä¸­ï¼Œå†è¿›è¡Œ v-if çš„æ¡ä»¶å¯¹æ¯”ï¼Œä¼šé€ æˆæ€§èƒ½é—®é¢˜ï¼Œå½±å“é€Ÿåº¦

**è§£å†³æ–¹æ³•ï¼šåœ¨v-forå‰å¯¹æ•°ç»„è¿›è¡Œç­›é€‰**

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <ul>
      <li v-for="(value,index) in arr.filter(item=>item.name!=='äºŒå·')" :key="index">{{value}}</li>
    </ul>
  </div>
</template>

<script>
export default {
  name:'togetherDemo',
  data(){
    return{
      arr: [
        { id: 1, name: "ä¸€å·" },
        {
          id: 2,
          name: "äºŒå·",
        },
        {
          id: 3,
          name: "ä¸‰å·",
        },
      ],
    }
  }
}
</script>

<style>

</style>
```

# v-foræ›´æ–°ç›‘æµ‹

>åŸå› : å½“v-foréå†çš„ç›®æ ‡ç»“æ„æ”¹å˜, `Vue`è§¦å‘v-forçš„æ›´æ–°

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <ul>
      <li v-for="(item,index) in arr" :key="index">{{item}}</li>
    </ul>
    <button @click="reverseArr">é¢ å€’æ•°ç»„</button>
    <button @click="sliceArr">æ•°ç»„æˆªå–</button>
    <button @click="updateArr">æ›´æ–°æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ </button>
  </div>
</template>

<script>
export default {
  name: 'updateDemo',
  data() {
    return {
      arr: [1, 2, 3, 4, 5, 6, 7]
    }
  },
  methods: {
    reverseArr() {
      this.arr.reverse()
    },
    sliceArr() {
      this.arr.splice(3)
    },
    updateArr() {
      // this.arr[0] = 999 // ä¸ºä»€ä¹ˆæ˜¾ç¤ºå€¼ä¿®æ”¹äº† é¡µé¢æ²¡æ›´æ–°???
      // åº”æ€¥æ–¹æ¡ˆ: $.set()å¼ºåˆ¶æ›´æ–°
      /* 
        this.$set(å‚æ•°1ï¼Œ å‚æ•°2ï¼Œ å‚æ•°3)
        å‚æ•°1ï¼š æ›´æ–°çš„ç›®æ ‡ç»“æ„ - v-foræ‰€éå†çš„æ•°æ®
        å‚æ•°2ï¼š æ›´æ–°æ•°æ®çš„ä½ç½® - å¸¸å¸¸æ˜¯ç´¢å¼•ä½ç½®
        å‚æ•°3ï¼š éœ€è¦æ›´æ–°çš„å€¼
      */
      // æ–¹æ¡ˆäºŒ
      this.arr.splice(0, 1, 999)
    }
  }
}
</script>

<style>

</style>
```

# v-foré‡è¦è§„åˆ™ğŸ”¥

æ•°ç»„å¯¹è±¡ä¸­ï¼Œæœ‰idå°±ç”¨idï¼Œæ²¡æœ‰idåˆ™ç”¨ç´¢å¼•ã€‚å¦‚æœç”¨idé¡µé¢æŠ¥é”™ï¼Œåˆ™æ¢æˆç´¢å¼•ã€‚

# jsæ•°ç»„æ–¹æ³•å¤ä¹ 

## ä¸ä¼šæ”¹å˜åŸæ•°ç»„

- map ç»™æ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ éƒ½æ‰§è¡Œä¸€æ¬¡å›è°ƒå‡½æ•°
- filter æ•°ç»„è¿‡æ»¤
- forEach æ•°ç»„éå†
- render ç´¯åŠ 
- som æ•°ç»„å†…åªè¦æœ‰ä¸€ä¸ªå…ƒç´ é€šè¿‡å›è°ƒå‡½æ•°çš„æµ‹è¯•, å°±è¿”å›true
- every æ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ éƒ½é€šè¿‡å›è°ƒå‡½æ•°çš„æµ‹è¯•, å°±è¿”å›true
- slice æ•°ç»„æˆªå–
- concat æ‹¼æ¥æ•°ç»„
- find è¿”å›æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ 
- findIndex è¿”å›æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•

## ä¼šæ”¹å˜åŸæ•°ç»„

- push åœ¨æ•°ç»„æœ«å°¾è¿½åŠ ä¸€ä¸ªå…ƒç´ 
- pop åˆ é™¤æ•°ç»„æœ«å°¾ä¸€ä¸ªå…ƒç´ 
- unshift åœ¨æ•°ç»„é¦–ä½è¿½åŠ ä¸€ä¸ªå…ƒç´ 
- shift åˆ é™¤æ•°ç»„é¦–ä½å…ƒç´ 
- splice æ ¹æ®å‚æ•°çš„ä¸åŒ,å¯ä»¥å®ç°å¢ åˆ  æ”¹åŠŸèƒ½ (å‚æ•°ä¸€:å¼€å§‹ç´¢å¼•,å‚æ•°äºŒ:å‡ ä¸ªå…ƒç´ ,å‚æ•°ä¸‰:æ›¿æ¢çš„å…ƒç´ )
- sort æ•°ç»„æ’åº
- reverse ç¿»è½¬æ•°ç»„
- flat æ‰å¹³åŒ–æ•°ç»„ è½¬ä¸€ç»´(flat(Infinity))

#  è™šæ‹ŸdomğŸ”¥

>  æ¦‚å¿µï¼š.vueæ–‡ä»¶ä¸­çš„templateé‡Œå†™çš„æ ‡ç­¾, éƒ½æ˜¯æ¨¡æ¿(å¹¶ä¸æ˜¯æµè§ˆå™¨ä¸­çœ‹åˆ°çš„çœŸå®çš„domå…ƒç´ ), éƒ½è¦è¢«vueå¤„ç†æˆè™šæ‹ŸDOM**å¯¹è±¡**, æ‰ä¼šæ¸²æŸ“æ˜¾ç¤ºåˆ°çœŸå®DOMé¡µé¢ä¸Š

1. å†…å­˜ä¸­ç”Ÿæˆä¸€æ ·çš„è™šæ‹ŸDOMç»“æ„ (==æœ¬è´¨æ˜¯ä¸ªJSå¯¹è±¡==)

    å› ä¸ºçœŸå®çš„DOMå±æ€§è¿‡å¤š, æ²¡åŠæ³•å¿«é€Ÿçš„çŸ¥é“å“ªä¸ªå±æ€§æ”¹å˜äº†

    æ¯”å¦‚templateé‡Œæ ‡ç­¾ç»“æ„

    ```vue
    <template>
        <div id="box">
            <p class="my_p">1234</p>
        </div>
    </template>
    ```

    å¯¹åº”çš„è™šæ‹ŸDOMç»“æ„

    ```js
    const dom = {
        type: 'div',
        attributes: [{id: 'box'}],
        children: {
            type: 'p',
            attributes: [{class: 'my_p'}],
            text: '1234'
        }
    }
    ```

2. vueæ•°æ®æ›´æ–°

    * ç”Ÿæˆæ–°çš„è™šæ‹ŸDOMç»“æ„
    * å’Œæ—§çš„è™šæ‹ŸDOMç»“æ„å¯¹æ¯”
    * åˆ©ç”¨diffç®—æ³•, æ‰¾ä¸ä¸åŒ, åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†(é‡ç»˜/å›æµ)åˆ°é¡µé¢

**è™šæ‹ŸDOMä¼˜åŠ¿ï¼š**è™šæ‹ŸDOMä¿å­˜åœ¨å†…å­˜ä¸­, åªè®°å½•domå…³é”®ä¿¡æ¯, é…åˆdifferentç®—æ³•æé«˜DOMæ›´æ–°çš„æ€§èƒ½

# **ä½ å¯¹è™šæ‹ŸDOMçš„ç†è§£ï¼Ÿ**ğŸ”¥

**ç­”ï¼š**`è™šæ‹ŸDOM`æœ¬è´¨ä¸Šæ˜¯`JavaScript`å¯¹è±¡ï¼Œæ˜¯å¯¹`çœŸå®DOM`çš„æŠ½è±¡è¡¨ç°ã€‚çŠ¶æ€å˜æ›´æ—¶ï¼Œè®°å½•æ–°æ ‘å’Œæ—§æ ‘çš„å·®å¼‚ï¼Œæœ€åæŠŠå·®å¼‚æ›´æ–°åˆ°çœŸæ­£çš„`dom`ä¸­**renderå‡½æ•°**

1. æ ¹æ®`tagName`ç”Ÿæˆçˆ¶æ ‡ç­¾ï¼Œè¯»å–propsï¼Œè®¾ç½®å±æ€§ï¼Œ `å¦‚æœæœ‰contentå†…å®¹`ï¼Œè®¾ç½®`innerHtmlæˆ–innerText`ï¼›
2. å¦‚æœå­˜åœ¨å­å…ƒç´ ï¼Œéå†å­å…ƒç´ é€’å½’è°ƒç”¨renderæ–¹æ³•ï¼Œå°†ç”Ÿæˆçš„å­å…ƒç´ ä¾æ¬¡æ·»åŠ åˆ°çˆ¶å…ƒç´ ä¸­ï¼Œå¹¶è¿”å›æ ¹ç›®å½•ï¼›

ä½ å¯¹è™šæ‹ŸDOMçš„ç†è§£ï¼Ÿ**

**ç­”ï¼š**`è™šæ‹ŸDOM`æœ¬è´¨ä¸Šæ˜¯`JavaScript`å¯¹è±¡ï¼Œæ˜¯å¯¹`çœŸå®DOM`çš„æŠ½è±¡è¡¨ç°ã€‚çŠ¶æ€å˜æ›´æ—¶ï¼Œè®°å½•æ–°æ ‘å’Œæ—§æ ‘çš„å·®å¼‚ï¼Œæœ€åæŠŠå·®å¼‚æ›´æ–°åˆ°çœŸæ­£çš„`dom`ä¸­**renderå‡½æ•°**

1. æ ¹æ®`tagName`ç”Ÿæˆçˆ¶æ ‡ç­¾ï¼Œè¯»å–propsï¼Œè®¾ç½®å±æ€§ï¼Œ `å¦‚æœæœ‰contentå†…å®¹`ï¼Œè®¾ç½®`innerHtmlæˆ–innerText`ï¼›
2. å¦‚æœå­˜åœ¨å­å…ƒç´ ï¼Œéå†å­å…ƒç´ é€’å½’è°ƒç”¨renderæ–¹æ³•ï¼Œå°†ç”Ÿæˆçš„å­å…ƒç´ ä¾æ¬¡æ·»åŠ åˆ°çˆ¶å…ƒç´ ä¸­ï¼Œå¹¶è¿”å›æ ¹ç›®å½•ï¼›



# diffç®—æ³• - åŒçº§æ¯”è¾ƒğŸ”¥

æ‰¾ä¸åŒ

> vueç”¨diffç®—æ³•, æ–°è™šæ‹Ÿdom, å’Œæ—§çš„è™šæ‹Ÿdomæ¯”è¾ƒ

## åœºæ™¯1: æ ¹å…ƒç´ å˜äº† =ã€‹ åˆ é™¤é‡å»º 

æ—§è™šæ‹ŸDOM

```vue
<div id="box">
    <p class="my_p">123</p>
</div>
```

æ–°è™šæ‹ŸDOM

```vue
<ul id="box">
    <li class="my_p">123</li>
</ul>
```

![image-20220602132641608](images/image-20220602132641608.png)

## åœºæ™¯2: æ ¹å…ƒç´ æ²¡å˜, å±æ€§æ”¹å˜ =ã€‹ å…ƒç´ å¤ç”¨, åªæ›´æ–°å±æ€§

æ—§è™šæ‹ŸDOM

```vue
<div id="box">
    <p class="my_p">123</p>
</div>
```

æ–°è™šæ‹ŸDOM

```vue
<div id="myBox" title="æ ‡é¢˜">
    <p class="my_p">123</p>
</div>
```

![image-20220602132718139](images/image-20220602132718139.png)

**é—®é¢˜ï¼š**

1. diffç®—æ³•å¦‚ä½•æ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOM?
2. æ ¹å…ƒç´ å˜åŒ–?
3. æ ¹å…ƒç´ æœªå˜, å±æ€§æ”¹å˜?

> æ€è€ƒï¼š å¦‚æœæ ‡ç­¾å†…å­æ ‡ç­¾/å†…å®¹æ”¹å˜ï¼Œdiffçš„ç®—æ³•æ˜¯å¦‚ä½•å¯¹åº”æ”¹å˜çš„ï¼Ÿ

# diffç®—æ³• - å±æ€§keyğŸ”¥

**åœºæ™¯3ï¼šæ ¹å…ƒç´ æ²¡å˜, å­å…ƒç´ æ²¡å˜, å…ƒç´ å†…å®¹æ”¹å˜**

## æ²¡æœ‰key =ã€‹ å°±åœ°æ›´æ–°

â€‹		v-forä¸ä¼šç§»åŠ¨DOM, è€Œæ˜¯å°è¯•å¤ç”¨, å°±åœ°æ›´æ–°ï¼Œå¦‚æœéœ€è¦v-forç§»åŠ¨DOM, ä½ éœ€è¦ç”¨ç‰¹æ®Š attribute `key` æ¥æä¾›ä¸€ä¸ªæ’åºæç¤º

```vue
<template>
  <div>
    <ul>
      <li v-for="obj in arr">
        {{ obj.name }}
        <input type="text">
      </li>
    </ul>
    <button @click="btn">ä¸‹æ ‡1ä½ç½®æ’å…¥æ–°æ¥çš„</button>
  </div>
</template>

<script>
export default {
  data() {
    return {
      arr: [
        {name: 'è€å¤§',id: 50},
        {name: 'è€äºŒ',id: 31},
        {name: 'è€ä¸‰',id: 10}
      ],
    };
  },
  methods: {
    btn(){
      this.arr.splice(1, 0, {
        id: 19, 
        name: 'æ–°æ¥çš„'
      })
    }
  }
};
</script>
```

![æ–°_vforæ›´ç»†_æ— key_å°±åœ°æ›´æ–°](images/%E6%96%B0_vfor%E6%9B%B4%E7%BB%86_%E6%97%A0key_%E5%B0%B1%E5%9C%B0%E6%9B%B4%E6%96%B0.gif)

æ—§ - è™šæ‹ŸDOMç»“æ„  å’Œ  æ–° - è™šæ‹ŸDOMç»“æ„ å¯¹æ¯”è¿‡ç¨‹

![image-20220602133357264](images/image-20220602133357264.png)

## æœ‰key - å€¼ä¸ºç´¢å¼• => å°±åœ°æ›´æ–°

â€‹		å› ä¸ºæ–°æ—§è™šæ‹ŸDOMå¯¹æ¯”, keyå­˜åœ¨å°±å¤ç”¨æ­¤æ ‡ç­¾æ›´æ–°å†…å®¹, å¦‚æœä¸å­˜åœ¨å°±ç›´æ¥å»ºç«‹ä¸€ä¸ªæ–°çš„

keyä¸ºç´¢å¼•-å›¾è§£è¿‡ç¨‹ (åˆå°±åœ°å¾€åæ›´æ–°äº†)

![image-20220602133721850](images/image-20220602133721850.png)

1. v-forå…ˆå¾ªç¯äº§ç”Ÿæ–°çš„DOMç»“æ„, keyæ˜¯è¿ç»­çš„, å’Œæ•°æ®å¯¹åº”

2. ç„¶åæ¯”è¾ƒæ–°æ—§DOMç»“æ„, æ‰¾åˆ°åŒºåˆ«, æ‰“è¡¥ä¸åˆ°é¡µé¢ä¸Š

    æœ€åè¡¥ä¸€ä¸ªli, ç„¶åä»ç¬¬äºŒä¸ªå¾€å, éƒ½è¦æ›´æ–°å†…å®¹

## æœ‰key - å€¼ä¸ºid(ä¸é‡å¤çš„å€¼) => ç§»åŠ¨æ›´æ–°

> <font color='red'>keyçš„å€¼åªèƒ½æ˜¯å”¯ä¸€ä¸é‡å¤çš„, å­—ç¬¦ä¸²æˆ–æ•°å€¼</font>

v-forä¸ä¼šç§»åŠ¨DOM, è€Œæ˜¯å°è¯•å¤ç”¨, å°±åœ°æ›´æ–°ï¼Œå¦‚æœéœ€è¦v-forç§»åŠ¨DOM, ä½ éœ€è¦ç”¨ç‰¹æ®Š attribute(å±æ€§) `key` æ¥æä¾›ä¸€ä¸ªæ’åºæç¤º

æ–°DOMé‡Œæ•°æ®çš„keyå­˜åœ¨, å»æ—§çš„è™šæ‹ŸDOMç»“æ„é‡Œæ‰¾åˆ°keyæ ‡è®°çš„æ ‡ç­¾, **å¤ç”¨æ ‡ç­¾**

æ–°DOMé‡Œæ•°æ®çš„keyå­˜åœ¨, å»æ—§çš„è™šæ‹ŸDOMç»“æ„é‡Œæ²¡æœ‰æ‰¾åˆ°keyæ ‡ç­¾çš„æ ‡ç­¾, **åˆ›å»º/æ’å…¥**

æ—§DOMç»“æ„çš„key, åœ¨æ–°çš„DOMç»“æ„é‡Œæ²¡æœ‰äº†, åˆ™ **ç§»é™¤keyæ‰€åœ¨çš„æ ‡ç­¾**



```vue
<template>
  <div>
    <ul>
      <li v-for="obj in arr" :key="obj.id">
        {{ obj.name }}
        <input type="text">
      </li>
    </ul>
    <button @click="btn">ä¸‹æ ‡1ä½ç½®æ’å…¥æ–°æ¥çš„</button>
  </div>
</template>
```

![image-20220602134548860](images/image-20220602134548860.png)

> æ€»ç»“: ä¸ç”¨keyä¹Ÿä¸å½±å“åŠŸèƒ½(å°±åœ°æ›´æ–°), æ·»åŠ keyå¯ä»¥æé«˜æ›´æ–°çš„æ€§èƒ½

é—®é¢˜ï¼šåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é€šè¿‡v-forè¿›è¡Œæ•°æ®çš„éå†éƒ½å¾—ç”¨idå—ï¼Ÿ

>  ç­”ï¼š æ•°ç»„å¯¹è±¡ä¸­ï¼Œæœ‰idå°±ç”¨idï¼Œæ²¡æœ‰idåˆ™ç”¨ç´¢å¼•ã€‚å¦‚æœç”¨idé¡µé¢æŠ¥é”™ï¼Œåˆ™æ¢æˆç´¢å¼•ã€‚

# é¢è¯•èƒŒç‚¹02ï¼š- å‡†å¤‡æ‰¾å·¥ä½œå‰ä¸€å‘¨æ‹¿å‡ºæ¥çœ‹çœ‹ç†è§£ç†è§£ğŸ”¥

**é—®ï¼šå¦‚ä½•ç†è§£Vueä¸­çš„diffç®—æ³•ï¼Ÿ**

**ç­”ï¼š**

â€‹		> æ‰¾ä¸åŒï¼

â€‹		åœ¨jsä¸­ï¼Œæ¸²æŸ“çœŸæ˜¯`DOM`çš„å¼€é”€æ˜¯éå¸¸å¤§çš„ï¼Œæ¯”å¦‚æˆ‘ä»¬ä¿®æ”¹äº†æŸä¸ªæ•°æ®ï¼Œå¦‚æœç›´æ¥æ¸²æŸ“åˆ°çœŸå®`DOM` ,ä¼šå¼•èµ·æ•´ä¸ª`DOM`æ ‘é‡ç»˜å’Œé‡æ’ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰å¯èƒ½å®ç°åªæ›´æ–°æˆ‘ä»¬ä¿®æ”¹çš„é‚£ä¸€å°å—`DOM`äºŒä¸è¦æ›´æ–°æ•´ä¸ª`DOM`å‘¢?æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦å…ˆæ ¹æ®çœŸå®`DOM`ç”Ÿæˆè™šæ‹Ÿ`DOM`ï¼Œå½“è™šæ‹Ÿ`DOM`æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®æ”¹å˜åä¼šç”Ÿæˆæœ‰ä¸€ä¸ªæ–°çš„`VNode`ï¼Œç„¶åæ–°çš„`VNode`å’Œæ—§çš„`VNode`ä½œæ¯”è¾ƒï¼Œå‘ç°æœ‰ä¸ä¸€æ ·çš„åœ°æ–¹å°±ç›´æ¥ä¿®æ”¹åœ¨çœŸå®DOMä¸Šï¼Œç„¶åæ—§çš„`VNode`çš„å€¼ä¸ºæ–°çš„`VNode`ï¼›

â€‹		**diff**çš„è¿‡ç¨‹å°±æ˜¯è°ƒç”¨`patch`å‡½æ•°ï¼Œæ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®çš„`DOM`æ‰“è¡¥ä¸ï¼Œåœ¨é‡‡ç”¨`diff`ç®—æ³•æ¯”è¾ƒæ–°æ—§èŠ‚ç‚¹çš„æ—¶å€™ï¼Œæ¯”è¾ƒè‡ªä¼šåœ¨åŒå±‚çº§è¿›è¡Œã€‚



**é—®ï¼šä»€ä¹ˆæ˜¯patchå‡½æ•°**

**ç­”ï¼š**

â€‹		åœ¨`patch`æ–¹æ³•ä¸­ï¼Œé¦–å…ˆè¿›è¡Œæ ‘çº§åˆ«çš„æ¯”è¾ƒ`new Vnode`ä¸å­˜åœ¨å°±åˆ é™¤`old VNode`ï¼Œ`old VNode`ä¸å­˜åœ¨å°±å¢åŠ æ–°çš„`VNode`éƒ½å­˜åœ¨å°±æ‰§è¡Œ`diff`æ›´æ–°ï¼Œå½“ç¡®å®šéœ€è¦æ‰§è¡Œ`diff`ç®—æ³•æ—¶ï¼Œæ¯”è¾ƒä¸¤ä¸ª`VNode`ï¼ŒåŒ…æ‹¬ä¸‰ç§ç±»å‹æ“ä½œï¼šå±æ€§æ›´æ–°ï¼Œæ–‡æœ¬æ›´æ–°ï¼Œå­èŠ‚ç‚¹æ›´æ–°ï¼Œæ–°è€èŠ‚ç‚¹å‡æœ‰å­èŠ‚ç‚¹ï¼Œåˆ™å¯¹å­èŠ‚ç‚¹è¿›è¡Œ`diff`æ“ä½œï¼Œè°ƒç”¨`updatechidren`å¦‚æœè€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œå…ˆæ¸…ç©ºè€èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ï¼Œç„¶åä¸ºå…¶æ–°å¢å­èŠ‚ç‚¹ï¼Œå¦‚æœæ–°èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œè€Œè€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œåˆ™ç§»é™¤è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œè€èŠ‚ç‚¹éƒ½æ²¡æœ‰å­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¿›è¡Œæ–‡æœ¬çš„æ›¿æ¢ã€‚

# åŠ¨æ€classä¸style

>åŠ¨æ€æ·»åŠ åˆ é™¤ç±»å

**è¯­æ³•:**

- : class="{ç±»å:å¸ƒå°”å€¼}"
-  :  class="[ç±»å]"
-  :  style="{csså±æ€§: å€¼}"
-  :  style="[csså±æ€§å: å€¼]"

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <!-- åŠ¨æ€class
    è¯­æ³•ï¼š
    1. :class="{ ç±»å: å¸ƒå°”å€¼(å¯ä»¥æ˜¯è¡¨è¾¾å¼çš„è¿”å›å€¼) }" => é€šè¿‡å¸ƒå°”å€¼æ¥åˆ¤æ–­å‰é¢çš„ç±»åæ˜¯å¦ç”Ÿæ•ˆ
    => è¯­æ³•1ï¼Œæ˜¯é€šè¿‡ä¸€ä¸ªå¸ƒå°”å€¼æ¥åšæŸä¸ªç±»åçš„å¼€å…³

    2. :class="[ å¸¦æœ‰ç±»åå­—ç¬¦ä¸²çš„å˜é‡ ]" => å¯ä»¥é€šè¿‡æ”¹å˜è¿™ä¸ªå˜é‡çš„å€¼ï¼Œæ¥å®ç°åˆ‡æ¢ä¸åŒçš„ç±»å
    => è¯­æ³•2ï¼Œé€šè¿‡æ”¹å˜å˜é‡ä¸­çš„ç±»åï¼Œæ¥åˆ‡æ¢æ ·å¼è¡¨ä¸­çš„ä¸åŒçš„ç±»çš„æ ·å¼

    ä½¿ç”¨çš„é€‰æ‹©ï¼š å¦‚æœæœ‰ä¸€ä¸ªæ ·å¼åœ¨ä½¿ç”¨åœºæ™¯ä¸­åªéœ€è¦å®ƒç”Ÿæ•ˆæˆ–è€…ä¸ç”Ÿæ•ˆï¼Œæ­¤æ—¶é€‰æ‹©è¯­æ³•1ï¼ˆèŠ±æ‹¬å·é”®å€¼å¯¹ï¼‰
    å¦‚æœæœ‰ä¸€ä¸ªæ ·å¼åœ¨ä½¿ç”¨åœºæ™¯ä¸­éœ€è¦å®æ—¶çš„å˜åŒ–ï¼Œæ­¤æ—¶é€‰æ‹©è¯­æ³•2ï¼ˆæ–¹æ‹¬å·å˜é‡ï¼‰ -->
    <p :class="{skyblue:flag}">hello world</p>
    <button @click="flag = !flag">åˆ‡æ¢skyblue_str</button>
    <p :class="classname">hello world</p>
    <button @click="changeClass">åˆ‡æ¢className</button>
    <!-- åŠ¨æ€style
    è¯­æ³•ï¼š
    åŠ¨æ€styleçš„å†™æ³•ç‰¹ç‚¹ï¼š å¦‚æœå‡ºç°å¤šä¸ªå•è¯çŸ­æ¨ªçº¿é“¾æ¥çš„æ ·å¼å±æ€§åæ—¶ï¼Œéœ€è¦è½¬åŒ–ä¸ºé©¼å³°å¼å‘½åæ¥è®¾ç½®

    1. :style="{ cssæ ·å¼å±æ€§å: æºå¸¦å½“å‰æ ·å¼çš„æ ·å¼å€¼çš„å˜é‡ }" => é€šè¿‡ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶å½“å‰æ˜¾ç¤ºæ ·å¼çš„çŠ¶æ€

    2. :style="[ å¸¦æœ‰å±æ€§é”®å€¼å¯¹çš„å¯¹è±¡ ]" => å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡ä¸­çš„å€¼æ¥å˜åŒ–å„ç§æ ·å¼å±æ€§

    ä½¿ç”¨çš„é€‰æ‹©: å¦‚æœä»…éœ€è¦ä¿®æ”¹æŸä¸€ä¸ª â€˜ç‰¹å®šâ€™ æ ·å¼çš„å±æ€§å†…å®¹ï¼Œ é€‰æ‹©è¯­æ³•1ï¼ˆèŠ±æ‹¬å·é”®å€¼å¯¹ï¼‰ï¼ˆ90%ï¼‰
    å¦‚æœéœ€è¦ä¿®æ”¹æˆ–åˆ‡æ¢ä¸åŒçš„æ ·å¼ç§ç±»æ—¶ï¼Œ é€‰æ‹©è¯­æ³•2(æ–¹æ‹¬å·å˜é‡) -->
    <p :style="{color:styleColor}">åŠ¨æ€style</p>
    <p :style="[styleObj]">åŠ¨æ€style2</p>
    <button @click="changeStyel">æ”¹å˜åŠ¨æ€style</button>
  </div>
</template>

<script>
export default {
  name: 'addClassName',
  data() {
    return {
      flag: true,
      classname: 'skyblue',
      styleColor: 'pink',
      styleObj: {
        color: 'red',
        background: '#ccc'
      }
    }
  },
  methods: {
    changeClass() {
      this.classname = 'pink'
    },
    changeStyel() {
      this.styleObj = { fontSize: '50px' }
    }
  }
}
</script>

<style lang="less" scoped>
.skyblue {
  color: skyblue
}

.pink {
  color: pink
}
</style>


```

# è¿‡æ»¤å™¨filter

>åœ¨ä¸æ”¹å˜æ•°æ®çš„æƒ…å†µä¸‹, ä½¿é¡µé¢çš„æ•°æ®æ”¹å˜. åˆ†ä¸º**å…¨å±€**è¿‡æ»¤å™¨ä¸**å±€éƒ¨**è¿‡æ»¤å™¨, åªèƒ½ä½¿ç”¨åœ¨**æ’å€¼è¡¨è¾¾å¼**å’Œ**v-bind**è¡¨è¾¾å¼

**è¯­æ³•:**

- Vue.filter("è¿‡æ»¤å™¨å", (å€¼) => {return "è¿”å›å¤„ç†åçš„å€¼"})
- filters: {è¿‡æ»¤å™¨åå­—: (å€¼) => {return "è¿”å›å¤„ç†åçš„å€¼"}

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <!--
      è¿‡æ»¤å™¨çš„ä½œç”¨ï¼š åœ¨ä¸æ”¹å˜dataä¸­æ•°æ®çš„åŸºç¡€ä¸Šï¼Œåœ¨é¡µé¢ä¸Šå±•ç¤ºä¸åŒäºæ•°æ®çš„å†…å®¹æ•ˆæœ
      è¿‡æ»¤å™¨åœ¨å®é™…å·¥ä½œä¸­ï¼Œå…¶å®åªæœ‰ä¸€äº›éå¸¸ç®€å•ä¸”é€šç”¨çš„å±•ç¤ºæ–¹æ³•ä¼šå»ä½¿ç”¨è¿‡æ»¤å™¨ï¼Œå…¶ä»–æ—¶å€™ä¸€èˆ¬å¾ˆå°‘é‡åˆ°

      è¿‡æ»¤å™¨æœ‰ä¸¤ç§ä¸åŒçš„å†™æ³•
      1. å…¨å±€è¿‡æ»¤å™¨ï¼ˆå®šä¹‰åœ¨å…¨å±€ï¼Œæ‰€æœ‰çš„ç»„ä»¶éƒ½å¯ä»¥ä½¿ç”¨ï¼‰ - filteræ˜¯Vueæ„é€ å‡½æ•°çš„é™æ€æ–¹æ³•
      Vue.filter(
        å‚æ•°1 - "è‡ªå®šä¹‰è¿‡æ»¤å™¨åç§°",
        å‚æ•°2 - (éœ€è¦è¿‡æ»¤çš„å€¼-å¿…å¡«, è¿‡æ»¤æ—¶ä¼ è¿‡æ¥çš„è‡ªå®šä¹‰å‚æ•°-é€‰å¡«) => {
          return 'è¿”å›å¤„ç†åçš„æ•°æ®'
        })

      2. å±€éƒ¨è¿‡æ»¤å™¨(å®šä¹‰åœ¨ç»„ä»¶ä¸­ï¼Œåªæœ‰å½“å‰çš„ç»„ä»¶æ‰å¯ä»¥ä½¿ç”¨)
      å’ŒdataåŒçº§çš„åœ°æ–¹æœ‰ä¸€ä¸ªå±æ€§ï¼Œå«åšfilters
      filters: {
        'è‡ªå®šä¹‰è¿‡æ»¤å™¨åç§°' (éœ€è¦è¿‡æ»¤çš„å€¼-å¿…å¡«, è¿‡æ»¤æ—¶ä¼ è¿‡æ¥çš„è‡ªå®šä¹‰å‚æ•°-é€‰å¡«) {
          return 'è¿”å›å¤„ç†åçš„æ•°æ®'
        }
      }

      è¿‡æ»¤å™¨çš„ä½¿ç”¨ - åœ¨æ’å€¼è¡¨è¾¾å¼ä¸­ï¼Œé€šè¿‡ â€˜|â€™ æ¥é“¾æ¥å˜é‡å’Œè¿‡æ»¤å™¨
      {{ å˜é‡ | è¿‡æ»¤å™¨(ä¼ å…¥è‡ªå®šä¹‰çš„å‚æ•°) }}
    -->
    <!-- å…¨å±€è¿‡æ»¤å™¨ -->
    <div>
      {{str | reverseG}}
    </div>
    <div>
      {{str | reverseG('-')}}
    </div>
    <!-- å±€éƒ¨è¿‡æ»¤å™¨ -->
    <div>
      {{str | toUp | reverseG}}
    </div>
    <!-- ç›´æ¥å†™ -->
    {{str.toUpperCase()}}
  </div>
</template>

<script>
export default {
  name: 'filtersDemo',
  data() {
    return {
      str: 'hello world'
    }
  },
  filters: {
    toUp(str) {
      return str.toUpperCase()
    },
  }
}
</script>

<style>

</style>
```

# è®¡ç®—å±æ€§computed

>å½“ä¸€ä¸ªæˆ–å¤šä¸ªå˜é‡å‘ç”Ÿå˜åŒ–æ—¶, ä¾èµ–å®ƒçš„å˜é‡ä¹ŸåŒæ—¶å˜åŒ–
>
>ä¼˜: å› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤çš„è¿›è¡Œè®¡ç®—ï¼Œé¡µé¢æ•ˆç‡é«˜
>
>ç¼º: å› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œè®¡ç®—å±æ€§ä¼šæ¶ˆè€—å†…å­˜
>
>æ€»:  ç©ºé—´æ¢æ—¶é—´

**è¯­æ³•:**

```vue
computed: {
        'è‡ªå®šä¹‰çš„è®¡ç®—å±æ€§åç§°' () {
          return 'è®¡ç®—åè¿”å›çš„å€¼'
        }
      }
```

**æ³¨æ„: **dataä¸­çš„å˜é‡ä¸è®¡ç®—å±æ€§çš„åç§°ä¸å¯ä»¥ç›¸åŒ

**æ¡ˆä¾‹:**

```vue
<template>
  <!-- 
      computedè®¡ç®—å±æ€§è¯­æ³•
      åœ¨dataåŒçº§ï¼Œåˆ›å»ºcomputed
      computed: {
        'è‡ªå®šä¹‰çš„è®¡ç®—å±æ€§åç§°' () {
          return 'è®¡ç®—åè¿”å›çš„å€¼'
        }
      }

      è®¡ç®—å±æ€§çš„ä½¿ç”¨ï¼š ä¸dataä¸­çš„å˜é‡çš„ä½¿ç”¨æ–¹å¼æ˜¯ä¸€æ ·çš„
      æ³¨æ„äº‹é¡¹ï¼šdataä¸­çš„å˜é‡ä¸è®¡ç®—å±æ€§çš„åç§°ä¸å¯ä»¥ç›¸åŒ

      è®¡ç®—å±æ€§çš„ç‰¹ç‚¹ï¼š è®¡ç®—å±æ€§å…·æœ‰ç¼“å­˜ç»“æœçš„ç‰¹ç‚¹ï¼Œè®¡ç®—å±æ€§åŸºäºå®ƒçš„ä¾èµ–é¡¹ï¼ˆè®¡ç®—å±æ€§ä¸­æ‰€ä½¿ç”¨çš„å…¶ä»–å˜é‡ï¼‰è¿›è¡Œè®¡ç®—çš„ç»“æœä¼šç¼“å­˜èµ·æ¥ï¼Œåªè¦ä¾èµ–é¡¹çš„å€¼ä¸å˜ï¼Œé‚£ä¹ˆä¸‹æ¬¡ä½¿ç”¨è®¡ç®—å±æ€§æ—¶ä¸å¿…è¿›è¡Œè®¡ç®—ï¼Œåªä¼šè¿”å›ç¼“å­˜ä¸­çš„ç»“æœï¼Œå¯¹äºä»£ç æ•ˆç‡æ¥è¯´æ˜¯æ¯”è¾ƒé«˜çš„

      è®¡ç®—å±æ€§çš„ä¼˜ç¼ºç‚¹ï¼š
      ä¼˜ç‚¹ï¼šå› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤çš„è¿›è¡Œè®¡ç®—ï¼Œé¡µé¢æ•ˆç‡é«˜
      ç¼ºç‚¹ï¼šå› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œè®¡ç®—å±æ€§ä¼šæ¶ˆè€—å†…å­˜
      ---- ç©ºé—´æ¢æ—¶é—´ ----
     -->
  <div>
    <div>a:{{a}}</div>
    <div>b:{{b}}</div>
    <div>c=a+b:{{c}}</div>
    <div>c=a+b:{{c}}</div>
    <div>c=a+b:{{c}}</div>
    <div>c=a+b(function):{{sum()}}</div>
    <div>c=a+b(function):{{sum()}}</div>
    <div>c=a+b(function):{{sum()}}</div>
  </div>
</template>

<script>
export default {
  name: 'computedDemo',
  data() {
    return {
      a: 10,
      b: 20
    }
  },
  computed: {
    'c'() {
      console.log('è®¡ç®—å±æ€§')
      return this.a + this.b
    }
  },
  methods: {
    sum() {
      console.log('æ–¹æ³•')
      return this.a + this.b
    }
  }
}
</script>

<style>

</style>
```

## è®¡ç®—å±æ€§çš„å®Œæ•´å†™æ³•

>è®¡ç®—å±æ€§ä¹Ÿæ˜¯å˜é‡, å¦‚æœæƒ³è¦ç›´æ¥èµ‹å€¼, éœ€è¦ä½¿ç”¨å®Œæ•´å†™æ³•
>
>æœ‰ç¼ºé™·, åŸºæœ¬ç”¨ä¸ç€, å¸¸ç”¨äºå…¨é€‰åé€‰

**è¯­æ³•:**

```vue
computed: {
    "å±æ€§å": {
        set(å€¼){
            
        },
        get() {
            return "å€¼"
        }
    }
}
```

# å…¨é€‰åé€‰æ¡ˆä¾‹

```vue
<template>
  <div>
    <span>å…¨é€‰:</span>
    <input type="checkbox" v-model="isAll" />
    <button @click="reverseBtn">åé€‰</button>
    <ul>
      <li v-for="(obj,index) in arr" :key="index">
        <input type="checkbox" v-model="obj.c" />
        <span>{{obj.name}}</span>
      </li>
    </ul>
  </div>
</template>

<script>
export default {
  data() {
    return {
      arr: [
        {
          name: "çŒªå…«æˆ’",
          c: false,
        },
        {
          name: "å­™æ‚Ÿç©º",
          c: false,
        },
        {
          name: "å”åƒ§",
          c: false,
        },
        {
          name: "ç™½é¾™é©¬",
          c: false,
        },
      ],
    };
  },
  computed: {
    'isAll': {
      set(value) {
        // valueè¡¨ç¤ºå½“å‰isAllçš„è®¡ç®—ç»“æœ
        this.arr.forEach(obj => obj.c = value)
      },
      get() {
        return this.arr.every(obj => obj.c)
      }
    }
  },
  methods: {
    reverseBtn() {
      this.arr.forEach(obj => obj.c = !obj.c)
    }
  }

};
</script>
```

# computendå’Œwatchçš„åŒºåˆ«ğŸ”¥

>**computedè®¡ç®—å±æ€§**è¯¥å±æ€§çš„ç»“æœä¼šè¢«ç¼“å­˜ï¼Œå½“`computed`ä¸­çš„å‡½æ•°æ‰€ä¾èµ–çš„å±æ€§æ²¡æœ‰å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œé‚£ä¹ˆè°ƒç”¨å½“å‰å‡½æ•°çš„æ—¶å€™ç»“æœä¼šä»ç¼“å­˜ä¸­è¯»å–ã€‚é™¤éä¾èµ–çš„å“åº”å¼å±æ€§å˜åŒ–æ—¶æ‰ä¼šé‡æ–°è®¡ç®—ï¼Œä¸»è¦å½“åšå±æ€§æ¥ä½¿ç”¨`computed`ä¸­çš„å‡½æ•°å¿…é¡»ç”¨`return`è¿”å›æœ€ç»ˆçš„ç»“æœï¼Œ`computed`æ›´é«˜æ•ˆï¼Œä¼˜å…ˆä½¿ç”¨
>
>ä¼˜: å› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œæ‰€ä»¥ä¸ä¼šé‡å¤çš„è¿›è¡Œè®¡ç®—ï¼Œé¡µé¢æ•ˆç‡é«˜
>
>ç¼º: å› ä¸ºç¼“å­˜æœºåˆ¶ï¼Œè®¡ç®—å±æ€§ä¼šæ¶ˆè€—å†…å­˜
>
>æ€»:  ç©ºé—´æ¢æ—¶é—´

# ç›‘å¬å™¨watch

>ç›‘å¬å˜é‡(dataæˆ–è®¡ç®—å±æ€§),å½“ç›‘å¬çš„å˜é‡æˆ–å€¼å‘ç”Ÿå˜åŒ–æ—¶,å°±ä¼šè§¦å‘ç›‘å¬å™¨ä¸­è®¾ç½®çš„é€»è¾‘ - ä¸€ä¸ªæ•°æ®çš„æ”¹å˜èƒ½å¤Ÿå½±å“å¤šä¸ªæ•°æ®çš„å˜åŒ–

**è¯­æ³•:**

```vue
// ç®€å•æ•°æ®ç±»å‹
watch:{
	'è¢«ç›‘å¬çš„å˜é‡(å±æ€§)å'(newValue, oldValue){
		// newValue: ç›‘å¬è¿™ä¸ªå˜é‡æ›´æ”¹åçš„å€¼
		// oldValue: ç›‘å¬è¿™ä¸ªå˜é‡æ›´æ”¹å‰çš„å€¼
	}
}
// å¤æ‚æ•°æ®ç±»å‹(å®Œæ•´å†™æ³•)
watch:{
	'è¢«ç›‘å¬çš„å˜é‡(å±æ€§)å':{
		handler(newValue, oldValue){
		// newValue: ç›‘å¬è¿™ä¸ªå˜é‡æ›´æ”¹åçš„å€¼
		// oldValue: ç›‘å¬è¿™ä¸ªå˜é‡æ›´æ”¹å‰çš„å€¼
		},
		deep: true // å¯åŠ¨æ·±åº¦ç›‘å¬å¤æ‚ç±»å‹
		immediate: true // ç«‹å³æ‰§è¡Œ - å½“ç›‘å¬å™¨ç”Ÿæˆæ—¶, å°±ä¼šæ‰§è¡Œä¸€æ¬¡handleré‡Œé¢çš„é€»è¾‘
	}
}
```

**æ¡ˆä¾‹:**

```vue
<template>
  <div>
    <input type="text" v-model="str" />
    <form action="">
      <input type="password" v-model="form.pwd" autocomplete='off'>
    </form>
  </div>
</template>

<script>
export default {
  name: "watch-demo",
  data() {
    return {
      str: "",
      form:{
        pwd:''
      }
    };
  },
  watch: {
    str(newValue, oldValue) {
      console.log(newValue, oldValue);
    },
    'form':{
      handler(newValue,oldValue){
        console.log(newValue,oldValue)
      },
      deep:true
    }
  },
};
</script>

<style>
</style>
```

# ç»„ä»¶

>ä½œç”¨: å°†ä¸€ä¸ªé¡µé¢çš„ä»£ç æ‹†åˆ†æˆå¤šä¸ªç»„ä»¶, è¿™æ ·ä¾¿äºé˜…è¯»; å¯ä»¥åå¤ä½¿ç”¨åŒä¸€ä¸ªç»„ä»¶, è€Œä¸”åå¤ä½¿ç”¨çš„ç»„ä»¶ä¸­çš„æ•°æ®ä¹Ÿæ˜¯ç‹¬ç«‹çš„	

**è¯­æ³•:**

```vue
<template>
	<!-- 3. æŒ‚è½½ -->
	<ç»„ä»¶å></ç»„ä»¶å>
</template>
<script>
// 1. å¼•å…¥
import è‡ªå®šä¹‰ç»„ä»¶å from 'ç»„ä»¶æ‰€åœ¨è·¯å¾„'
export default {
    name: "foldPanel",
    components: {
        // 2.æ³¨å†Œ
        è‡ªå®šä¹‰ç»„ä»¶å:ä½¿ç”¨çš„ç»„ä»¶å
        // ä¸€èˆ¬æƒ…å†µåªå†™ä¸€ä¸ª åå­—ä¸å€¼ç›¸åŒ
    }
}
</script>
```

**æ¡ˆä¾‹:**

```vue
<template>
  <div id="app">
    <h3>æ¡ˆä¾‹ï¼šæŠ˜å é¢æ¿</h3>
    <!-- 3. æŒ‚è½½ -->
    <pannel></pannel>
    <pannel></pannel>
    <pannel></pannel>
    <pannel></pannel>
  </div>
</template>


<script>
// 1. å¼•å…¥
import Pannel from "./pages/pannel.vue";
export default {
  name: "foldPanel",
  components: {
    // 2. æ³¨å†Œ
    Pannel,
  },
};
</script>

<style lang="less" scoped>
body {
  background-color: #ccc;
  #app {
    width: 400px;
    margin: 20px auto;
    background-color: #fff;
    border: 4px solid blueviolet;
    border-radius: 1em;
    box-shadow: 3px 3px 3px rgba(0, 0, 0, 0.5);
    padding: 1em 2em 2em;
    h3 {
      text-align: center;
    }
    
  }
}
</style>
```

# çˆ¶å­ç»„ä»¶çš„é€šä¿¡

**è¯­æ³•:**

```vue
// 1. åœ¨çˆ¶ç»„ä»¶çš„æŒ‚è½½æ ‡ç­¾å†…ä»¥é”®å€¼å¯¹çš„æ–¹å¼å°†éœ€è¦ä¼ é€’çš„æ•°æ®å†™å…¥  æ³¨: å¯ä»¥é…åˆ v-for å¤§é‡ä¼ é€’æ•°æ®
<Product title="å£æ°´é¸¡" price="99.99" content="å¼€ä¸šå¤§é…¬å®¾,å…¨åœºå…«æŠ˜"></Product>
// 2. åœ¨å­ç»„ä»¶é€šè¿‡propså°†çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®æ¥æ”¶
props:['title','price','content']
```

**æ¡ˆä¾‹:**

çˆ¶ç»„ä»¶

```Vue
<template>
  <div>
    <Product
      title="å£æ°´é¸¡"
      price="99.99"
      content="å¼€ä¸šå¤§é…¬å®¾,å…¨åœºå…«æŠ˜"
    ></Product>
    <Product :title="title" :price="price" :content="content"></Product>
    <Product
      v-for="(obj, index) in arr"
      :key="index"
      :title="obj.title"
      :price="obj.price"
      :content="obj.content"
    ></Product>
  </div>
</template>

<script>
import Product from "./pages/MyProduct.vue";
export default {
  name: "product-App",
  components: {
    Product,
  },
  data() {
    return {
      title: "æ— éª¨é¸¡çˆª",
      price: 50,
      content: "è¶…çº§åŠ å€",
      arr: [
        {
          title: "a1",
          price: "a2",
          content: "a3",
        },
        {
          title: "b1",
          price: "b2",
          content: "b3",
        },
        {
          title: "c1",
          price: "c2",
          content: "c3",
        },
      ],
    };
  },
};
</script>

<style>
</style>
```

å­ç»„ä»¶

```vue
<template>
  <div class="my-product">
    <h3>æ ‡é¢˜: {{title}}</h3>
    <p>ä»·æ ¼: {{price}} å…ƒ</p>
    <p>æè¿°: {{content}}</p>
  </div>
</template>

<script>
export default {
  name:'productPannel',
  props:['title','price','content']
};
</script>

<style>
.my-product {
  width: 400px;
  padding: 20px;
  border: 2px solid #000;
  border-radius: 5px;
  margin: 10px;
}
</style>
```

# å•å‘æ•°æ®æµ

>ä»çˆ¶åˆ°å­çš„æ•°æ®æµå‘ï¼Œå«åšå•å‘æ•°æ®æµ
>

**åœ¨vueä¸­éœ€è¦éµå¾ªå•å‘æ•°æ®æµåŸåˆ™**

  1. çˆ¶ç»„ä»¶çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œå­ç»„ä»¶ä¼šè‡ªåŠ¨è·Ÿç€å˜

  2. å­ç»„ä»¶ä¸èƒ½ç›´æ¥ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„props  propsæ˜¯åªè¯»çš„ï¼ˆè¿™é‡Œçš„åªè¯»ï¼Œæ˜¯æ ˆå†…å­˜ä¸­çš„æ•°æ®åªè¯»ï¼Œå¯ä»¥æ”¹å †ï¼‰**çˆ¶ç»„ä»¶ä¼ ç»™å­ç»„ä»¶çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå­ç»„ä»¶ä¿®æ”¹å¯¹è±¡çš„å±æ€§ï¼Œæ˜¯ä¸ä¼šæŠ¥é”™çš„ï¼Œå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹, äº’ç›¸æ›´æ–°**

     ```vue
     <template>
       <div class="my-product">
         <h3>æ ‡é¢˜: {{ title }}</h3>
         <p>ä»·æ ¼: {{ price }}å…ƒ</p>
         <p>{{ intro }}</p>
         <button @click="() => {price--}">å®åˆ€-ç 1å…ƒ</button>
       </div>
     </template>
     ```

# åœ¨å­ç»„ä»¶ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥å¯¹è±¡å±æ€§çš„æ–¹å¼

åœ¨å­ç»„ä»¶çš„dataä¸­, æ‹·è´ä¸€ä¸ªçˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å¯¹è±¡, é€šè¿‡å¤§å®¶éƒ½æœ‰ç›¸åŒçš„å †åœ°å€, æ¥é—´æ¥çš„ä¿®æ”¹çˆ¶ç»„ä»¶ä¸­çš„å¯¹è±¡å‚æ•°

**åŸºæœ¬è¯­æ³•:**

çˆ¶ç»„ä»¶

```vue
<template>
	<Product :obj='obj'></Product>
</template>
<script>
data(){
	return{
        obj{
         title: "a1",
         price: 20,
         content: "a3",
    }
    }
}
</script>
```

å­ç»„ä»¶

```vue
<template>
	<button @click="objCloon.price--">ç ä¸€åˆ€,ä»·æ ¼å‡ä¸€</button>
</template>
<script>
props:['obj'],
data(){
    return{
        objCloon:this.obj
    }
}
</script>
```

# å­çˆ¶ç»„ä»¶é€šä¿¡

> ç›®æ ‡ï¼š ä»å­ç»„ä»¶æŠŠå€¼ä¼ å‡ºæ¥ç»™å¤–é¢ä½¿ç”¨

**è¯­æ³•:**

å­ç»„ä»¶

```vue
<template>
	<button @click="btn">ç ä¸€åˆ€,ä»·æ ¼å‡ä¸€,å­å‘çˆ¶</button>
</template>
<script>
methods:{
    props:[title],
	btn(){
		this.$emit('subPrice',this.title)
	}
}
</script>
```

çˆ¶ç»„ä»¶

```vue
<template>
	 <Product @subPrice='subPriceFn'></Product>
</template>
<script>
data(){
    return{
        arr[
        	{
        		title:a,
    			price:20
    		},
        	{
        		title:b,
        		price:30
			}
        ]
	}
}
methods: {
    subPriceFn(title) {
      this.arr.forEach((obj) => {
        if (obj.title === title) obj.price--;
      });       
    },
  },
</script>
```

# propsè¿›é˜¶ç”¨æ³•(work)

**è¯´æ˜ï¼š**propsä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”å¯ä»¥æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå¿…è¦æ€§ï¼Œé»˜è®¤å€¼

**è¯­æ³•:**

```vue
export default {
	props: {
        'æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§å': {
            type: String, // å¿…å¡« - ä¼ å‚ç±»å‹
            required: true, // æ˜¯å¦å¿…ä¼ ï¼ˆä¸€èˆ¬ä¹Ÿä¸å†™ï¼Œäº†è§£ï¼‰å¦‚æœæ²¡ä¼ ,åªä¼šæ§åˆ¶å°æŠ¥é”™,ä¸å½±å“æ­£å¸¸è¿è¡Œ
            default: 'string' // é»˜è®¤å€¼
        },
        b: {
            type: Array,
            default: () => []	
        },
        c: {
            type: Object,
            default: () => ({})
        }
    }
};
```

# è·¨ç»„ä»¶ä¼ å‚ - EventBus

ä¸ºä½•ä¸ä½¿ç”¨?

1. æ— æ³•ç²¾ç¡®çš„ç¡®è®¤å½“å‰åˆ›å»ºçš„è‡ªå®šä¹‰äº‹ä»¶æ˜¯å¦åœ¨ä¹‹å‰è¢«ä½¿ç”¨äº†ï¼Œæˆ–è€…æœ‰å…¶ä»–ç”¨é€”
2. æ¥æ”¶æ–¹æ— æ³•ç¡®ä¿æ‹¿åˆ°çš„æ•°æ®ï¼Œæ˜¯ä½ ç›®æ ‡ç»„ä»¶å‘é€æ¥çš„
